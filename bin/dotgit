#! /bin/bash

# Dotgit is an easy-to-use and effective way to backup all your dotfiles and
# manage them in a repository

# Developer: Kobus van Schoor

REPO="$PWD"
DOTFILES=""
DMZ=""

DG_H=$(dirname "$(readlink -f "$0")")/dotgit_headers

source "$DG_H/files"
source "$DG_H/help"
source "$DG_H/init"
source "$DG_H/prompts"
source "$DG_H/security"
source "$DG_H/update"
source "$DG_H/restore"
source "$DG_H/clean"
source "$DG_H/info"
source "$DG_H/cycle"

if [[ $# -eq 0 ]]; then
	phelp;
	exit;
fi;

if [[ $1 != "init" ]]; then cfilelist "$1" "$2"; fi
safeguards $1

trap ext SIGINT

case "$1" in
	"update")update "$2";;
	"restore")restore "$2";;
	"generate")generate;;
	"hard-restore")hardrestore "$2";;
	"init")init;;
	"encrypt")encrypt;;
	"decrypt")decrypt;;
	"clean")cleanhome;;
	"passwd")passwd;;
	"diff")pdiff;;
	"help")phelp;;
	*)echo -e "$1 is not a valid argument."; exit 1;;
esac;

ext 0
